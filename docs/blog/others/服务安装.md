

## CentOS Docker 安装

`curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun`

[参考](https://www.runoob.com/docker/centos-docker-install.html)

>设置开机自启动

```bash
systemctl enable docker # 开机自动启动docker

systemctl start docker # 启动docker
systemctl restart docker # 重启dokcer 

```

## Docker安装Alist

```bash
#这里是用的dockerdesktop，映射目录可以改成你自己的
docker run -di --restart=always -v /root/alist/data:/opt/alist/data -p 5244:5244 -e PUID=0 -e PGID=0 -e UMASK=022 --name="alist" xhofe/alist:latest
#首次登陆建议设置成指定密码
docker exec -it alist ./alist admin set NEW_PASSWORD
```



## Docker安装frps

### 服务端安装

> 拉取镜像

`docker pull snowdreamtech/frps`

> 配置

```bash
mkdir /etc/frp
vim /etc/frp/frps.toml
# 输入以下内容

[common]
# 监听端口
bind_port = 7000
# 面板端口
dashboard_port = 7500
# 登录面板账号设置
dashboard_user = admin
dashboard_pwd = admin
# 设置http及https协议下代理端口（非重要）
# vhost_http_port = 7080
# vhost_https_port = 7081
# 身份验证
token = 12345678
```



> 启动

```bash
docker run --restart=always --network host -d -v /etc/frp/frps.toml:/etc/frp/frps.toml --name frps snowdreamtech/frps
```

> 启动成功查看端口占用：

```bash
netstat -nltp | grep frps
```

> 服务端面板查看

![服务安装-2024-05-09-14-47-10](http://scwh1zyu0.hn-bkt.clouddn.com/服务安装-2024-05-09-14-47-10.png)



### 客户端安装



> 客户端配置如下：

```bash
mkdir /etc/frp
vim /etc/frp/frpc.toml
# 输入以下内容

[common]
# server_addr为FRPS服务器IP地址
server_addr = 120.55.170.164
# server_port为服务端监听端口，bind_port
server_port = 7000
# 身份验证
token = 12345678

# 内网穿透22端口
[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 22
remote_port = 15000

# 内网穿透80端口
[nginx]
type = tcp
local_ip = 127.0.0.1
local_port = 80
remote_port = 15001
```

> 客户端启动

```bash
docker run --restart=always --network host -d -v /etc/frp/frpc.toml:/etc/frp/frpc.toml --name frpc snowdreamtech/frpc
```



### 访问

> 上面客户端暴露的ssh和Nginx服务，访问如下：

```bash
# 格式 ssh 内网计算机用户@转发服务器IP -p 转发服务器代理端口
ssh root@120.55.170.164 -p 15000
```

```bash
# 在浏览器输入地址就可内网nginx服务了
http://120.55.170.164:15001
```


### 下载地址

+ 官方下载地址：https://github.com/fatedier/frp
+ 安卓版载地址：https://github.com/mainfunx/frpc_android